(function(o){"use strict";"function"==typeof define&&define.amd?define(["jquery"],o):o(jQuery)})(function(o){var t,i=[31,29,31,30,31,30,31,31,30,31,30,31],e=[31,28,31,30,31,30,31,31,30,31,30,31],n=new Date,p=n.getFullYear(),l=n.getMonth(),a=n.getDate(),u=n.getHours(),v=n.getMinutes(),s=null,r={type:"date",background:"#494a4a"},c=!1;o.extend(o.fn,{datetime:function(d){return this.each(function(){function h(){var t=o('<div class="dateTimeWrap"><div class="datePart"><div class="dateTimeHead"><span year="2019" month="7" id="dateTime"><select class="year" name="yearSelect" id="yearSelect"><option value="1920">1920骞�</option><option value="1921">1921骞�</option><option value="1922">1922骞�</option><option value="1923">1923骞�</option><option value="1924">1924骞�</option><option value="1925">1925骞�</option><option value="1926">1926骞�</option><option value="1927">1927骞�</option><option value="1928">1928骞�</option><option value="1929">1929骞�</option><option value="1930">1930骞�</option><option value="1931">1931骞�</option><option value="1932">1932骞�</option><option value="1933">1933骞�</option><option value="1934">1934骞�</option><option value="1935">1935骞�</option><option value="1936">1936骞�</option><option value="1937">1937骞�</option><option value="1938">1938骞�</option><option value="1939">1939骞�</option><option value="1940">1940骞�</option><option value="1941">1941骞�</option><option value="1942">1942骞�</option><option value="1943">1943骞�</option><option value="1944">1944骞�</option><option value="1945">1945骞�</option><option value="1946">1946骞�</option><option value="1947">1947骞�</option><option value="1948">1948骞�</option><option value="1949">1949骞�</option><option value="1950">1950骞�</option><option value="1951">1951骞�</option><option value="1952">1952骞�</option><option value="1953">1953骞�</option><option value="1954">1954骞�</option><option value="1955">1955骞�</option><option value="1956">1956骞�</option><option value="1957">1957骞�</option><option value="1958">1958骞�</option><option value="1959">1959骞�</option><option value="1960">1960骞�</option><option value="1961">1961骞�</option><option value="1962">1962骞�</option><option value="1963">1963骞�</option><option value="1964">1964骞�</option><option value="1965">1965骞�</option><option value="1966">1966骞�</option><option value="1967">1967骞�</option><option value="1968">1968骞�</option><option value="1969">1969骞�</option><option value="1970">1970骞�</option><option value="1971">1971骞�</option><option value="1972">1972骞�</option><option value="1973">1973骞�</option><option value="1974">1974骞�</option><option value="1975">1975骞�</option><option value="1976">1976骞�</option><option value="1977">1977骞�</option><option value="1978">1978骞�</option><option value="1979">1979骞�</option><option value="1980">1980骞�</option><option value="1981">1981骞�</option><option value="1982">1982骞�</option><option value="1983">1983骞�</option><option value="1984">1984骞�</option><option value="1985">1985骞�</option><option value="1986">1986骞�</option><option value="1987">1987骞�</option><option value="1988">1988骞�</option><option value="1989">1989骞�</option><option value="1990">1990骞�</option><option value="1991">1991骞�</option><option value="1992">1992骞�</option><option value="1993">1993骞�</option><option value="1994">1994骞�</option><option value="1995">1995骞�</option><option value="1996">1996骞�</option><option value="1997">1997骞�</option><option value="1998">1998骞�</option><option value="1999">1999骞�</option><option value="2000">2000骞�</option><option value="2001">2001骞�</option><option value="2002">2002骞�</option><option value="2003">2003骞�</option><option value="2004">2004骞�</option><option value="2005">2005骞�</option><option value="2006">2006骞�</option><option value="2007">2007骞�</option><option value="2008">2008骞�</option><option value="2009">2009骞�</option><option value="2010">2010骞�</option><option value="2011">2011骞�</option><option value="2012">2012骞�</option><option value="2013">2013骞�</option><option value="2014">2014骞�</option><option value="2015">2015骞�</option><option value="2016">2016骞�</option><option value="2017">2017骞�</option><option value="2018">2018骞�</option><option value="2019">2019骞�</option><option value="2020">2020骞�</option><option value="2021">2021骞�</option><option value="2022">2022骞�</option><option value="2023">2023骞�</option><option value="2024">2024骞�</option><option value="2025">2025骞�</option><option value="2026">2026骞�</option><option value="2027">2027骞�</option><option value="2028">2028骞�</option><option value="2029">2029骞�</option><option value="2030">2030骞�</option><option value="2031">2031骞�</option><option value="2032">2032骞�</option><option value="2033">2033骞�</option><option value="2034">2034骞�</option><option value="2035">2035骞�</option><option value="2036">2036骞�</option><option value="2037">2037骞�</option><option value="2038">2038骞�</option><option value="2039">2039骞�</option><option value="2040">2040骞�</option><option value="2041">2041骞�</option><option value="2042">2042骞�</option><option value="2043">2043骞�</option><option value="2044">2044骞�</option><option value="2045">2045骞�</option><option value="2046">2046骞�</option><option value="2047">2047骞�</option><option value="2048">2048骞�</option><option value="2049">2049骞�</option><option value="2050">2050骞�</option></select><select class="month" name="monthSelect" id="monthSelect"><option value="0">涓€鏈�</option><option value="1">浜屾湀</option><option value="2">涓夋湀</option><option value="3">鍥涙湀</option><option value="4">浜旀湀</option><option value="5">鍏湀</option><option value="6">涓冩湀</option><option value="7">鍏湀</option><option value="8">涔濇湀</option><option value="9">鍗佹湀</option><option value="10">鍗佷竴鏈�</option><option value="11">鍗佷簩鏈�</option></select></span><div class="changeMonth"><span id="pre"><</span> <span id="next">></span></div></div><div><ul><li>鏃�</li><li>涓€</li><li>浜�</li><li>涓�</li><li>鍥�</li><li>浜�</li><li>鍏�</li></ul><ul id="dayDat"></ul></div><div class="dateTimeFoot"><span class="selTime">閫夋嫨鏃堕棿</span><span id="close">鍏抽棴</span><span id="selcurday">浠婂ぉ</span></div></div><div class="timePart" style="display:none"><ul><li id="selHour"><p>鏃�</p><ol></ol></li><li id="selMinute"><p>鍒�</p><ol></ol></li></ul><div class="timeFooter"><span class="selTime">閫夋嫨鏃ユ湡</span><span id="ensure">纭畾</span><span id="curTime">褰撳墠鏃堕棿</span></div></div></div>');o("body").append(t),c=!0}function m(o,t){var i=new Date(t,o,1);return i.getDay()}function f(o,t){var n=t%4,p=t%100,l=t%400;return 0==n&&0!=p||0==l?i[o]:e[o]}function g(){var t="",i=f(l,p);a>i&&(a=i),console.log(a);for(var e,n=m(l,p),u=0;u<n;u++)t+="<li></li>";for(u=1;u<=i;u++)e=u==a?"class = 'curDay'":"",t+="<li "+e+">"+u+"</li>";o("#dayDat").html(t)}function y(){for(var t="",i="",e=0;e<24;e++)e<10&&(e="0"+e),t+=e==u?"<li class='cur'>"+e+"</li>":"<li>"+e+"</li>";for(e=0;e<60;e++)e<10&&(e="0"+e),i+=e==v?"<li class='cur'>"+e+"</li>":"<li>"+e+"</li>";o("#selHour ol").html(t),o("#selMinute ol").html(i)}function T(){o(".dateTimeWrap").show();var i=t.type;if("date"!=i){y(),o(".datePart").hide().siblings(".timePart").show();var e=o("#selHour .cur");o("#selHour ol").scrollTop(e.offset().top-o("#selHour ol").offset().top+o("#selHour ol").scrollTop()-e.outerHeight());var n=o("#selMinute .cur");o("#selMinute ol").scrollTop(n.offset().top-o("#selMinute ol").offset().top+o("#selMinute ol").scrollTop()-n.outerHeight())}"time"!=i&&(g(),o(".datePart").show().siblings(".timePart").hide(),o("#yearSelect").val(p),o("#monthSelect").val(l)),"datetime"==i?o(".selTime").show():o(".selTime").hide()}function M(){var o=t.type,i=t.value,e=!0;return i&&i.length>0&&("datetime"==o&&(5!=i.length||i[0]>2050||i[0]<1920||i[1]>12||i[1]<1||i[2]>31||i[2]<1||i[3]>23||i[3]<1||i[4]>59||i[4]<1)&&(e=!1),"date"==o&&(3!=i.length||i[0]>2050||i[0]<1920||i[1]>12||i[1]<1||i[2]>31||i[2]<1)&&(e=!1),"time"==o&&(2!=i.length||i[0]>23||i[0]<1||i[1]>59||i[1]<1)&&(e=!1)),e}function P(){var i,e,n=t.type;(i="date"==n?p+"-"+(parseInt(l)+1)+"-"+a:"time"==n?u+":"+v:p+"-"+(parseInt(l)+1)+"-"+a+" "+u+":"+v,s.val(i),o(".dateTimeWrap").hide(),t.success&&"function"==typeof t.success)&&(e="date"==n?[p,parseInt(l)+1,parseInt(a)]:"time"==n?[u,v]:[p,parseInt(l)+1,parseInt(a),u,v],t.success(e))}var S=o(this);t=o.extend(!0,{},r,d),c||h(),o("#selcurday,#close,#dayDat,.changeMonth span,.selTime").unbind("click"),o("#yearSelect,#monthSelect").unbind("change"),o("#yearSelect,#monthSelect").change(function(){l=o("#monthSelect").val(),p=o("#yearSelect").val(),g()}),o(".changeMonth span").click(function(){"pre"==this.id?(l-=1,-1==l&&(l=11,p-=1)):(l+=1,12==l&&(l=0,p+=1)),g(),o("#yearSelect").val(p),o("#monthSelect").val(l)}),o("#selcurday").click(function(){var i=new Date;p=i.getFullYear(),l=i.getMonth(),a=i.getDate(),g(),o("#yearSelect").val(p),o("#monthSelect").val(l),"datetime"!=t.type?P():o(".datePart").hide().siblings(".timePart").show()}),o("#close").click(function(){o(".dateTimeWrap").hide()}),o("#dayDat").on("click","li",function(){a=o(this).html(),"datetime"!=t.type?P():o(".datePart").hide().siblings(".timePart").show()}),o(".selTime").click(function(){"閫夋嫨鏃堕棿"==o(this).html()?o(".datePart").hide().siblings(".timePart").show():o(".datePart").show().siblings(".timePart").hide()}),o(".timePart ol,.timeFooter #ensure,.timeFooter #curTime").unbind("click"),o(".timePart ol").on("click","li",function(){o(this).addClass("cur").siblings("li").removeClass("cur");var t=o(this).parent();t.animate({scrollTop:o(this).offset().top-t.offset().top+t.scrollTop()-o(this).outerHeight()},100)}),o(".timeFooter #ensure").click(function(){u=o("#selHour ol .cur").html(),v=o("#selMinute ol .cur").html(),P(),o(".dateTimeWrap").hide()}),o(".timeFooter #curTime").click(function(){u=n.getHours(),v=n.getMinutes(),parseInt(u)<10&&(u="0"+u),parseInt(v)<10&&(v="0"+v),y(u,v),P()}),S.click(function(){if(t=o.extend(!0,{},r,d),!M())return alert("鍙傛暟閿欒"),!1;var i=this.value;if(i){i=i.replace(/-/g,"/");var e=new Date(i)}"date"==t.type?this.value?(l=e.getMonth(),p=e.getFullYear(),a=e.getDate()):(l=t.value[1]-1,p=t.value[0],a=t.value[2]):"time"==t.type?this.value?(u=this.value.split(":")[0],v=this.value.split(":")[1]):(v=t.value[1],u=t.value[0]):this.value?(l=e.getMonth(),p=e.getFullYear(),a=e.getDate(),u=e.getHours(),v=e.getMinutes()):(l=t.value[1]-1,p=t.value[0],a=t.value[2],v=t.value[4],u=t.value[3]),s=o(this),T();var n=S.offset().left,c=S.offset().top+S.outerHeight()+4;o(".dateTimeWrap").css({background:t.background,top:c,left:n})})}),this}})});